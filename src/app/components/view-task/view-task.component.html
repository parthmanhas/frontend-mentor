<form [formGroup]="form">
    <div class="modal container p-2">
        <div class="title-container d-flex mt-1">
            <p class="bold black-medium-50-text">{{task.title}}</p>
            <svg width="5" height="20" xmlns="http://www.w3.org/2000/svg">
                <g fill="#828FA3" fill-rule="evenodd">
                    <circle cx="2.308" cy="2.308" r="2.308" />
                    <circle cx="2.308" cy="10" r="2.308" />
                    <circle cx="2.308" cy="17.692" r="2.308" />
                </g>
            </svg>
        </div>
        <div class="description-container mt-1">
            <p class="bold grey-medium-50-text">{{task.description}}</p>
        </div>
        <div *ngIf="task.subtasks && task.subtasks.length > 0" class="subtask-container mt-1">
            <p class="bold grey-medium-50-text">Subtasks ({{completeSubtasks.length}} of {{this.task.subtasks.length}})
            </p>
            <!-- <div  *ngFor="let subtaskControl of form.controls; let i = index">
                <input id="subtask-{{i}}" class="mr-1 checkbox" type="checkbox" [formControl]="subtaskControl">
                <label [ngClass]="{'completed': subtask.isCompleted}" for="subtask-{{i}}">{{subtask.title}}</label>
            </div> -->
            <!-- <div formArrayName="subtasks">
                
            </div> -->
            <div class="subtask mb-1 p-1" *ngFor="let subtaskFormGroup of subtasksFormArray.controls; let i = index">
                <input type="checkbox" [formControlName]="subtasksFormArray.at(i)">
                <label>{{ subtaskFormGroup.get('title')?.value }}</label>
            </div>
        </div>
        <div class="status-container mt-1">
            <p class="bold grey-medium-50-text">Status</p>
            <div class="status-dropdown semi-bold" [class.error-border]="!selectedOption  && submitted"
                [class.purple-border]="isDropdownOpen" (click)="toggleDropdown()">
                <div class="selected-option">
                    <p>{{ selectedOption }}</p>
                    <svg *ngIf="!isDropdownOpen" width="10" height="7" xmlns="http://www.w3.org/2000/svg">
                        <path stroke="#635FC7" stroke-width="2" fill="none" d="m1 1 4 4 4-4" />
                    </svg>
                    <svg *ngIf="isDropdownOpen" width="10" height="7" xmlns="http://www.w3.org/2000/svg">
                        <path stroke="#635FC7" stroke-width="2" fill="none" d="M9 6 5 2 1 6" />
                    </svg>
                </div>
                <span *ngIf="!selectedOption && submitted" class="error">Can't be empty</span>
            </div>
            <div class="dropdown" *ngIf="isDropdownOpen">
                <div class="option" *ngFor="let option of filteredOptions" (click)="selectOption(option)">
                    {{ option }}
                </div>
            </div>
        </div>
    </div>
</form>